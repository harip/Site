{"version":3,"sources":["common/components/editor/TextEditor.js","common/components/myposts/Post.js","context/PostContext.js","common/components/myposts/PostService.js","common/components/skeletons/SkeletonPost.js","common/components/myposts/Posts.js","myposts/ReadOnlyPosts.js"],"names":["TextEditor","props","post","useState","content","postContent","setPostContent","apiKey","initialValue","init","height","menubar","plugins","toolbar","onEditorChange","editor","newContent","useStyles","makeStyles","theme","root","margin","display","justifyContent","alignContent","flexWrap","listStyle","padding","spacing","contactHeader","fontSize","borderBottom","background","card","marginRight","marginBottom","crudButtons","marginLeft","wrapper","position","Post","item","userContextValue","useContext","UserContext","classes","title","postTitle","setPostTitle","titleEdit","setTitleEdit","React","loading","savePost","cardTitle","Typography","TextField","autoFocus","id","label","type","fullWidth","value","onChange","handleChange","e","target","onTitleEdit","titleCrudButtonMarkup","isLoggedIn","ButtonGroup","color","aria-label","className","IconButton","onClick","postData","token","status","postSave","Fragment","disabled","Card","CardHeader","action","CardContent","dangerouslySetInnerHTML","__html","CardActions","disableSpacing","CircularProgress","size","buttonProgress","timeStamp","PostContext","createContext","posts","PostProvider","children","setPostData","useEffect","a","axiosCfg","get","response","contextValue","data","fetchData","Provider","PostData","axiosConfig","put","marginTop","postBody","SkeletonPost","Grid","container","direction","justify","alignItems","map","xs","sm","Skeleton","variant","Posts","document","onSavePost","currentPost","callback","postDataResponse","_id","ReadOnlyPosts"],"mappings":"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","file":"static/js/4.31c15683.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\n\nconst TextEditor = (props) => {\n  const {post} = props;\n  const [postContent, setPostContent] = useState(post.content);\n\n  const handleEditorChange = (content, editor) => {\n    setPostContent(content);\n    post.newContent = content;\n  }\n\n  return (\n    <Editor\n      apiKey=\"wefhnu0ma6zh07117uwxwjj5ila4m1d1y16pp4e59wbc6log\"\n      initialValue={postContent}\n      init={{\n        height: 500,\n        menubar: false,\n        plugins: [\n          'advlist autolink lists link image charmap print preview anchor',\n          'searchreplace visualblocks code fullscreen',\n          'insertdatetime media table paste code codesample image'\n        ],\n        toolbar: 'undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | codesample | image'\n      }}\n      onEditorChange={handleEditorChange}\n    />\n  );\n\n}\n\nexport default TextEditor; ","import React, { useState,useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader'; \nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';  \nimport Typography from '@material-ui/core/Typography'; \nimport TextEditor from '../editor/TextEditor';\nimport { ButtonGroup, IconButton } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport TextField from '@material-ui/core/TextField'; \nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport UserContext from '../../../context/UserContext';\n\nconst useStyles= makeStyles( (theme)=> ({\n    root: {\n      margin: 10,\n      display: 'flex',\n      justifyContent: 'center',\n      alignContent: 'center',\n      flexWrap: 'wrap',\n      listStyle: 'none',\n      padding: theme.spacing(0.5)  \n    },\n    contactHeader: {\n      fontSize: 20,\n      borderBottom: 2,\n      background: '#ffa602'\n    },\n    card: {\n        marginRight: 5,\n        marginBottom: 5\n    },\n    crudButtons : {\n      marginLeft: 'auto'\n    },\n    wrapper: {\n      margin: theme.spacing(1),\n      position: 'relative',\n    },\n  }));\n\nconst Post = (props) => {   \n    const userContextValue = useContext(UserContext);\n    const classes = useStyles();\n    const [postTitle, setPostTitle] = useState(props.item.title);\n    const [titleEdit, setTitleEdit] = useState(true);\n    const [loading, setLoading] = React.useState(true);\n \n    // Parent events\n    const {savePost} = props;\n \n    /**\n     * Function that renders the title markup edit mode or readonly mode\n     * @param {*} item current item that is being edited\n     */\n    const cardTitle = (item) => { \n      return (\n        <div>  \n          {\n            !titleEdit\n            ?  \n              <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"postTitle\"\n                label=\"title\"\n                type=\"text\"\n                fullWidth\n                value={postTitle}\n                onChange={handleChange}\n              />                 \n            :  <Typography>{item.title}</Typography>     \n          }  \n        </div>\n      );\n    } \n\n    /**\n     * Function to change title (controlled)\n     * @param {*} e title event\n     */\n    const handleChange = (e) => {\n      setPostTitle(e.target.value);\n    }\n\n    /**\n     * Function that will enable editing content\n     */\n    const renderContent = () => {\n      return (\n        <React.Fragment>\n          {\n            !titleEdit \n            ?  <TextEditor post={props.item} /> \n            :  \n              <div\n              dangerouslySetInnerHTML={{\n                __html: props.item.content\n              }}></div>\n          }\n        </React.Fragment>\n      );\n    } \n\n    const onTitleEdit = () => {\n      setTitleEdit(false)\n    }\n\n    /**\n     * Invoke save method that will call the parent save\n     * parent save will invoke the api\n     */\n    const postSave = () => { \n      // Get post data\n      const postData = {\n        title: postTitle,\n        content: props.item.newContent,\n        token: userContextValue.token\n      };\n\n      if (props.item[\"_id\"]){\n        postData[\"_id\"] = props.item[\"_id\"];\n      } \n      \n      setTitleEdit(true);  \n      savePost(props.item, postData, (status)=>{\n        if (status) {\n          setTitleEdit(true);  \n        }\n      });\n    }\n    \n    /**\n     * Get save and edit button markup for title\n     */\n    const titleCrudButtonMarkup = () => {  \n      if (!userContextValue.isLoggedIn()) {\n        return null;\n      }\n\n      // show edit functionality\n      return (\n        <ButtonGroup \n          color=\"primary\" \n          aria-label=\"outlined primary button group\" \n          className={classes.crudButtons}>\n            {\n              titleEdit \n              ?  <IconButton aria-label=\"edit\" onClick={onTitleEdit}><EditIcon /></IconButton>       \n              :  <IconButton aria-label=\"save\" onClick={ ()=> postSave()} color=\"primary\"><SaveIcon /></IconButton>      \n            } \n        </ButtonGroup>\n      );\n    };\n\n    const getPostCard = (item) => {  \n        return (  \n          <div className={classes.wrapper} disabled={loading}>\n            <div className={classes.card}>\n                <Card  > \n                    <CardHeader\n                        className={classes.contactHeader}\n                        title={\n                          cardTitle(item)\n                        }  \n                        action={titleCrudButtonMarkup()}\n                    /> \n                    <CardContent> \n                        <div id=\"container\">\n                            {renderContent()}\n                        </div>\n                    </CardContent>\n                    <CardActions disableSpacing>\n                        {/* <IconButton aria-label=\"add to favorites\">\n                        <FavoriteIcon />\n                        </IconButton>   */}\n                    </CardActions> \n                </Card> \n            </div>  \n            {\n              loading && \n              <CircularProgress size={24} className={classes.buttonProgress} />\n            }\n            </div> \n        );\n    }  \n\n    return(  \n        <React.Fragment key={props.item.timeStamp}>\n            {getPostCard(props.item)} \n            </React.Fragment>\n      );   \n}\n\nexport default Post;","import React, { useEffect, useState } from 'react'; \nimport axiosCfg from '../apis/axiosConfig';\n\nconst PostContext = React.createContext({\n  // Default empty function\n  posts: null\n});\n\nexport const PostProvider = ({children}) => {\n  const [postData, setPostData] = useState(null);\n\n  useEffect(() => {\n    // Make api call to get posts and set data\n    async function fetchData() { \n      let response = await axiosCfg.get('/post'); \n      \n      // Payload\n      const contextValue = {\n        posts: response.data\n      }\n\n      setPostData(contextValue);\n    }\n    fetchData(); \n  }, [])\n\n  return (\n    <PostContext.Provider value={postData} >\n      {children}\n    </PostContext.Provider>\n  )\n};\n \nexport default PostContext;","import axiosConfig from \"../../../apis/axiosConfig\"; \n\nconst PostData = async (data) => { \n    const response = await axiosConfig.put('/post',data);\n    return response.data;\n};\n\nexport default PostData;","import Skeleton from '@material-ui/lab/Skeleton';\nimport { makeStyles } from '@material-ui/core/styles'; \nimport Grid from '@material-ui/core/Grid';    \n\nconst useStyles= makeStyles( (theme)=> ({\n    post: {\n      marginTop: 30\n    },\n    postBody : {\n        height: 118,\n        marginTop: -8\n    },\n    postTitle: {\n        height: 50,\n        background: '#ffa602'\n    }\n  })); \n\nconst SkeletonPost = () =>{\n    const posts = [1,2,3];\n    const classes = useStyles();   \n\n    return(\n        <Grid container direction=\"row\"\n            justify=\"center\"\n            alignItems=\"center\">       \n            {posts.map((item) => { \n                return(\n                <Grid \n                    key={item} \n                    item xs={12} \n                    sm={9} \n                    className={classes.post}>   \n                        <Skeleton variant=\"text\" className={classes.postTitle}/>\n                        <Skeleton variant=\"rect\" className={classes.postBody} />\n                </Grid> \n                );\n            })}       \n        </Grid>\n    );\n};\n\nexport default SkeletonPost;","import React, { useEffect, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles'; \nimport Grid from '@material-ui/core/Grid';    \nimport Post from './Post';\nimport PostContext from '../../../context/PostContext';\nimport PostData from '../myposts/PostService';\nimport SkeletonPost from '../skeletons/SkeletonPost';\n\nconst useStyles= makeStyles( (theme)=> ({  \n  card: {\n    marginRight: 5,\n    marginBottom: 5\n  },\n  post: {\n    marginTop: 30\n  }\n})); \n\nconst Posts = (props) => { \n  const data = useContext(PostContext); \n  const classes = useStyles();   \n\n  useEffect(() => {\n    document.title=\"Add Posts\";\n  }, []);  \n\n  if (!data){\n    // Return a ghost element\n    return (\n      <SkeletonPost/>\n    );\n  }  \n\n  const { posts } = data; \n  /**\n   * Function that will be triggered when a post is changed\n   * @param {*} item post that was changed\n   */\n  const onSavePost = async (currentPost, postData, callback) => {\n    // Save to database and if successful show that in frontend as well\n    // If not show an error dialog to the user\n    const postDataResponse = await PostData(postData); \n    const status = postDataResponse['success'];\n    callback(status);\n    if (status && status === true) {\n      currentPost.title = postData.title;\n      currentPost.content = postData.content;\n    } \n  }\n\n  return(  \n    <Grid container direction=\"row\"\n    justify=\"center\"\n    alignItems=\"center\">       \n      {posts.map((item) => { \n        return(\n          <Grid key={item._id} item xs={12} sm={9} className={classes.post}>   \n            <Post item={item} savePost = {onSavePost}  key={item._id}/>\n          </Grid> \n        );\n      })}       \n    </Grid> \n  );  \n}\n\nexport default Posts;","/**\n * Display admin view of posts\n * Use a posts context\n */ \nimport {useContext} from 'react';\nimport Posts from '../common/components/myposts/Posts';\nimport PostContext, { PostProvider } from '../context/PostContext';\n\nconst ReadOnlyPosts = () => {   \n  const data = useContext(PostContext); \n  if (!data){\n    return <div>Loading...</div>\n  }  \n \n  return (\n    <PostProvider>\n      <Posts/> \n    </PostProvider>\n  );\n}\n\nexport default ReadOnlyPosts;"],"sourceRoot":""}