(this["webpackJsonphp-profile"]=this["webpackJsonphp-profile"]||[]).push([[4],{265:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),i=n(173),s=n(238),o=n(240),l=n(259),u=n.n(l),j=n(22),b=n(12),d=n(224),p=n(236),m=n(225),x=n(237),f=n(33),O=n(261),h=function(e){var t=e.post,n=Object(r.useState)(t.content),c=Object(b.a)(n,2),i=c[0],s=c[1];return Object(a.jsx)(O.a,{apiKey:"wefhnu0ma6zh07117uwxwjj5ila4m1d1y16pp4e59wbc6log",initialValue:i,init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code codesample image"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | codesample | image | code"},onEditorChange:function(e,n){s(e),t.newContent=e}})},g=n(263),v=n(223),y=n(255),w=n.n(y),C=n(256),k=n.n(C),N=n(241),T=n(38),S=n(254),B=n.n(S),I=n(109),_=n(260),A=n(21),F=n.n(A),L=n(30),H=n(54),z={posts:null,error:!1,retry:function(){},save:function(){},addNewBlog:function(){},saveComment:function(){}},E=c.a.createContext(z),R=function(e){var t=e.children,n=Object(r.useContext)(T.b),c=Object(r.useState)(null),i=Object(b.a)(c,2),s=i[0],o=i[1];function l(){return u.apply(this,arguments)}function u(){return(u=Object(L.a)(F.a.mark((function e(){var t,n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=!1,e.prev=2,e.next=5,H.a.get("/post");case 5:a=e.sent,t=a.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n=!0;case 12:o({posts:t,error:n});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(r.useEffect)((function(){l()}),[]);var d=function(){var e=Object(L.a)(F.a.mark((function e(t,a){var r,c,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(a._id=t),e.prev=1,e.next=4,H.a.put("/post",Object(j.a)(Object(j.a)({},a),{},{token:n.token}));case 4:return r=Object(j.a)({},s),c=r.posts,(i=c.findIndex((function(e){return e._id==="".concat(t)})))>=0&&(c.splice(i,1,a),o({posts:c,error:!1})),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(L.a)(F.a.mark((function e(t,n){var a,r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={title:"",subTitle:"",content:"Enter text"},r=Object(j.a)({},s),(c=r.posts).unshift(a),o({posts:c,error:!1}),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(L.a)(F.a.mark((function e(t,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.patch("/post",n);case 3:return e.sent,e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsx)(E.Provider,{value:Object(j.a)(Object(j.a)({},s),{},{retry:function(){return l()},addNewBlog:p,save:d,saveComment:m}),children:t})},W=E,M=Object(i.a)((function(e){return{root:{margin:10,display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5)},contactHeader:{fontSize:20,borderBottom:2,background:"#ffa602"},card:{marginRight:5,marginBottom:5},cardActions:{borderTop:"solid 1px #f9f5ee"},crudButtons:{marginLeft:"auto"},wrapper:{margin:e.spacing(1),position:"relative"},commentBox:{width:"100%"}}})),P=function(e){var t=Object(r.useContext)(T.b),n=Object(r.useContext)(W),i=M(),s=Object(r.useState)(!1),o=Object(b.a)(s,2),l=o[0],u=o[1],O=Object(r.useState)(""),y=Object(b.a)(O,2),C=y[0],S=y[1],A=Object(r.useState)(!1),F=Object(b.a)(A,2),L=F[0],H=F[1],z=e.item,E=Object(_.a)({initialValues:{title:z.title,subTitle:z.subTitle,content:z.content},onSubmit:function(e){console.log(e)}}),R=function(){return t.isLoggedIn()?Object(a.jsx)(g.a,{type:"submit",color:"primary","aria-label":"outlined primary button group",className:i.crudButtons,children:l?Object(a.jsx)(v.a,{"aria-label":"save",onClick:function(){return P()},color:"primary",children:Object(a.jsx)(k.a,{})}):Object(a.jsx)(v.a,{"aria-label":"edit",onClick:function(){return u(!l)},children:Object(a.jsx)(w.a,{})})}):null},P=function(){var t=Object(j.a)(Object(j.a)({},e.item),{},{title:E.values.title,subTitle:E.values.subTitle,content:e.item.newContent?e.item.newContent:e.item.content});n.save(e.item._id,t)&&u(!l)},D=function(){H(!0);n.saveComment(e.item._id,{_id:e.item._id,text:C});H(!1)},J=function(e){S(e.target.value)};return Object(a.jsx)(c.a.Fragment,{children:(e.item,Object(a.jsx)("div",{className:i.wrapper,children:Object(a.jsx)("div",{className:i.card,children:l?Object(a.jsx)("form",{onSubmit:E.handleSubmit,children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(p.a,{className:i.contactHeader,title:Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(N.a,{autoFocus:!0,margin:"dense",id:"postTitle",label:"title",name:"title",type:"text",fullWidth:!0,value:E.values.title,onChange:E.handleChange}),Object(a.jsx)(N.a,{margin:"dense",name:"subTitle",id:"postSubTitle",label:"subTitle",type:"text",fullWidth:!0,value:E.values.subTitle,onChange:E.handleChange})]}),action:R()}),Object(a.jsx)(m.a,{children:Object(a.jsx)("div",{id:"container",children:Object(a.jsx)(h,{post:z})})}),Object(a.jsxs)(x.a,{className:i.cardActions,children:[Object(a.jsx)(B.a,{}),Object(a.jsx)(N.a,{id:"standard-multiline-flexible",label:"add comment",className:i.commentBox,multiline:!0,rowsMax:4,value:C,onChange:J}),Object(a.jsx)(I.a,{buttonProps:{text:"Save",onClick:D,loading:L}})]})]})}):Object(a.jsxs)(d.a,{children:[Object(a.jsx)(p.a,{className:i.contactHeader,title:Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(f.a,{variant:"h3",children:z.title}),Object(a.jsx)(f.a,{variant:"h6",children:z.subTitle})]}),action:R()}),Object(a.jsx)(m.a,{children:Object(a.jsx)("div",{id:"container",dangerouslySetInnerHTML:{__html:e.item.content}})}),Object(a.jsxs)(x.a,{className:i.cardActions,children:[Object(a.jsx)(B.a,{}),Object(a.jsx)(N.a,{id:"standard-multiline-flexible",label:"add comment",className:i.commentBox,multiline:!0,rowsMax:4,value:C,onChange:J}),Object(a.jsx)(I.a,{buttonProps:{text:"Save",onClick:D,loading:L}})]})]})})}))},e.item.timeStamp)},D=n(264),J=n(175),V=n(257),K=n.n(V),q=n(258),G=n.n(q),Q=Object(i.a)((function(e){return{post:{marginTop:30},postBody:{height:118,marginTop:-8,width:"100%"},postTitle:{height:50,background:"#ffa602"},retry:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"lighter",textAlign:"center"},sadIcon:{fontSize:"40px"},button:{margin:e.spacing(1)}}})),U=function(e){var t=e.responseData,n=e.retry,r=Q(),c=function(){return n()},i=function(e){return 1===e&&t&&t.error?Object(a.jsxs)("div",{className:r.retry,onClick:c,children:[Object(a.jsx)(f.a,{variant:"label",children:"Something went wrong "}),Object(a.jsx)("br",{}),Object(a.jsx)(K.a,{className:r.sadIcon}),Object(a.jsx)("br",{}),Object(a.jsx)(J.a,{variant:"contained",color:"primary",className:r.button,endIcon:Object(a.jsx)(G.a,{}),children:"Retry"})]}):Object(a.jsx)(D.a,{variant:"rect",className:r.postBody})};return Object(a.jsx)(s.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[1,2,3].map((function(e){return Object(a.jsxs)(s.a,{item:!0,xs:12,sm:9,className:r.post,children:[Object(a.jsx)(D.a,{variant:"text",className:r.postTitle}),i(e)]},e)}))})},X=Object(i.a)((function(e){return{card:{marginRight:5,marginBottom:5},post:{marginTop:30},fabAddBlog:{marginTop:10,position:"fixed",marginLeft:"auto",zIndex:999}}})),Y=function(e){var t=Object(r.useContext)(W),n=Object(r.useContext)(T.b),i=X();Object(r.useEffect)((function(){document.title="Blog"}),[]);if(!t||t&&t.error||t&&!t.posts)return Object(a.jsx)(U,{responseData:t,retry:function(){return t.retry()}});var l=t.posts;return Object(a.jsxs)(c.a.Fragment,{children:[n.isLoggedIn()?Object(a.jsx)("div",{className:i.fabAddBlog,children:Object(a.jsx)(o.a,{color:"primary","aria-label":"add",onClick:t.addNewBlog,children:Object(a.jsx)(u.a,{})})}):"",Object(a.jsx)(s.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:l.map((function(e){return Object(a.jsx)(s.a,{item:!0,xs:12,sm:9,className:i.post,children:Object(a.jsx)(P,{item:e},e._id)},e._id)}))})]})};t.default=function(){return Object(r.useContext)(W)?Object(a.jsx)(R,{children:Object(a.jsx)(Y,{})}):Object(a.jsx)("div",{children:"Loading..."})}}}]);
//# sourceMappingURL=4.b01679c0.chunk.js.map