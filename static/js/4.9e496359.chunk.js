(this["webpackJsonphp-profile"]=this["webpackJsonphp-profile"]||[]).push([[4],{264:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),i=n(173),s=n(238),o=n(22),l=n(12),u=n(224),j=n(236),b=n(225),d=n(237),m=n(33),p=n(260),x=function(e){var t=e.post,n=Object(r.useState)(t.content),c=Object(l.a)(n,2),i=c[0],s=c[1];return Object(a.jsx)(p.a,{apiKey:"wefhnu0ma6zh07117uwxwjj5ila4m1d1y16pp4e59wbc6log",initialValue:i,init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code codesample image"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | codesample | image | code"},onEditorChange:function(e,n){s(e),t.newContent=e}})},O=n(262),f=n(223),h=n(255),g=n.n(h),v=n(256),y=n.n(v),w=n(241),C=n(38),k=n(254),S=n.n(k),T=n(109),N=n(259),B=n(21),_=n.n(B),I=n(30),A=n(54),F={posts:null,error:!1,retry:function(){},save:function(){},saveComment:function(){}},H=c.a.createContext(F),L=function(e){var t=e.children,n=Object(r.useContext)(C.b),c=Object(r.useState)(null),i=Object(l.a)(c,2),s=i[0],u=i[1];function j(){return b.apply(this,arguments)}function b(){return(b=Object(I.a)(_.a.mark((function e(){var t,n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=!1,e.prev=2,e.next=5,A.a.get("/post");case 5:a=e.sent,t=a.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n=!0;case 12:u({posts:t,error:n});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(r.useEffect)((function(){j()}),[]);var d=function(){var e=Object(I.a)(_.a.mark((function e(t,a){var r,c,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(a),t&&(a._id=t),e.prev=3,e.next=6,A.a.put("/post",Object(o.a)(Object(o.a)({},a),{},{token:n.token}));case 6:return r=Object(o.a)({},s),c=r.posts,(i=c.findIndex((function(e){return e._id==="".concat(t)})))>=0&&(c.splice(i,1,a),u({posts:c,error:!1})),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(I.a)(_.a.mark((function e(t,n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.patch("/post",n);case 3:return e.sent,e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsx)(H.Provider,{value:Object(o.a)(Object(o.a)({},s),{},{retry:function(){return j()},save:d,saveComment:m}),children:t})},R=H,W=Object(i.a)((function(e){return{root:{margin:10,display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5)},contactHeader:{fontSize:20,borderBottom:2,background:"#ffa602"},card:{marginRight:5,marginBottom:5},cardActions:{borderTop:"solid 1px #f9f5ee"},crudButtons:{marginLeft:"auto"},wrapper:{margin:e.spacing(1),position:"relative"},commentBox:{width:"100%"}}})),z=function(e){var t=Object(r.useContext)(C.b),n=Object(r.useContext)(R),i=W(),s=Object(r.useState)(!1),p=Object(l.a)(s,2),h=p[0],v=p[1],k=Object(r.useState)(""),B=Object(l.a)(k,2),_=B[0],I=B[1],A=Object(r.useState)(!1),F=Object(l.a)(A,2),H=F[0],L=F[1],z=e.item,E=Object(N.a)({initialValues:{title:z.title,subTitle:z.subTitle,content:z.content},onSubmit:function(e){console.log(e)}}),M=function(){return t.isLoggedIn()?Object(a.jsx)(O.a,{type:"submit",color:"primary","aria-label":"outlined primary button group",className:i.crudButtons,children:h?Object(a.jsx)(f.a,{"aria-label":"save",onClick:function(){return P()},color:"primary",children:Object(a.jsx)(y.a,{})}):Object(a.jsx)(f.a,{"aria-label":"edit",onClick:function(){return v(!h)},children:Object(a.jsx)(g.a,{})})}):null},P=function(){var t=Object(o.a)(Object(o.a)({},e.item),{},{title:E.values.title,subTitle:E.values.subTitle,content:e.item.newContent?e.item.newContent:e.item.content});n.save(e.item._id,t)&&v(!h)},D=function(){L(!0);var t={_id:e.item._id,text:_};n.saveComment(e.item._id,t);L(!1)},J=function(e){I(e.target.value)};return Object(a.jsx)(c.a.Fragment,{children:(e.item,Object(a.jsx)("div",{className:i.wrapper,children:Object(a.jsx)("div",{className:i.card,children:h?Object(a.jsx)("form",{onSubmit:E.handleSubmit,children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(j.a,{className:i.contactHeader,title:Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(w.a,{autoFocus:!0,margin:"dense",id:"postTitle",label:"title",name:"title",type:"text",fullWidth:!0,value:E.values.title,onChange:E.handleChange}),Object(a.jsx)(w.a,{margin:"dense",name:"subTitle",id:"postSubTitle",label:"subTitle",type:"text",fullWidth:!0,value:E.values.subTitle,onChange:E.handleChange})]}),action:M()}),Object(a.jsx)(b.a,{children:Object(a.jsx)("div",{id:"container",children:Object(a.jsx)(x,{post:z})})}),Object(a.jsxs)(d.a,{className:i.cardActions,children:[Object(a.jsx)(S.a,{}),Object(a.jsx)(w.a,{id:"standard-multiline-flexible",label:"add comment",className:i.commentBox,multiline:!0,rowsMax:4,value:_,onChange:J}),Object(a.jsx)(T.a,{buttonProps:{text:"Save",onClick:D,loading:H}})]})]})}):Object(a.jsxs)(u.a,{children:[Object(a.jsx)(j.a,{className:i.contactHeader,title:Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(m.a,{variant:"h3",children:z.title}),Object(a.jsx)(m.a,{variant:"h6",children:z.subTitle})]}),action:M()}),Object(a.jsx)(b.a,{children:Object(a.jsx)("div",{id:"container",dangerouslySetInnerHTML:{__html:e.item.content}})}),Object(a.jsxs)(d.a,{className:i.cardActions,children:[Object(a.jsx)(S.a,{}),Object(a.jsx)(w.a,{id:"standard-multiline-flexible",label:"add comment",className:i.commentBox,multiline:!0,rowsMax:4,value:_,onChange:J}),Object(a.jsx)(T.a,{buttonProps:{text:"Save",onClick:D,loading:H}})]})]})})}))},e.item.timeStamp)},E=n(263),M=n(175),P=n(257),D=n.n(P),J=n(258),V=n.n(J),K=Object(i.a)((function(e){return{post:{marginTop:30},postBody:{height:118,marginTop:-8,width:"100%"},postTitle:{height:50,background:"#ffa602"},retry:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"lighter",textAlign:"center"},sadIcon:{fontSize:"40px"},button:{margin:e.spacing(1)}}})),q=function(e){var t=e.responseData,n=e.retry,r=K(),c=function(){return n()},i=function(e){return 1===e&&t&&t.error?Object(a.jsxs)("div",{className:r.retry,onClick:c,children:[Object(a.jsx)(m.a,{variant:"label",children:"Something went wrong "}),Object(a.jsx)("br",{}),Object(a.jsx)(D.a,{className:r.sadIcon}),Object(a.jsx)("br",{}),Object(a.jsx)(M.a,{variant:"contained",color:"primary",className:r.button,endIcon:Object(a.jsx)(V.a,{}),children:"Retry"})]}):Object(a.jsx)(E.a,{variant:"rect",className:r.postBody})};return Object(a.jsx)(s.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[1,2,3].map((function(e){return Object(a.jsxs)(s.a,{item:!0,xs:12,sm:9,className:r.post,children:[Object(a.jsx)(E.a,{variant:"text",className:r.postTitle}),i(e)]},e)}))})},G=Object(i.a)((function(e){return{card:{marginRight:5,marginBottom:5},post:{marginTop:30}}})),Q=function(e){var t=Object(r.useContext)(R),n=G();Object(r.useEffect)((function(){document.title="Blog"}),[]);if(!t||t&&t.error||t&&!t.posts)return Object(a.jsx)(q,{responseData:t,retry:function(){return t.retry()}});var c=t.posts;return Object(a.jsx)(s.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:c.map((function(e){return Object(a.jsx)(s.a,{item:!0,xs:12,sm:9,className:n.post,children:Object(a.jsx)(z,{item:e},e._id)},e._id)}))})};t.default=function(){return Object(r.useContext)(R)?Object(a.jsx)(L,{children:Object(a.jsx)(Q,{})}):Object(a.jsx)("div",{children:"Loading..."})}}}]);
//# sourceMappingURL=4.9e496359.chunk.js.map